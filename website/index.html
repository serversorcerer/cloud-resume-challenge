<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Joe Leto | Cloud Terminal</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico">
  <style>
    body {
      margin:0;
      background:#0a0a0a;
      color:#33ff33;
      font-family:'Fira Code', monospace;
      overflow-x:hidden;
    }
    #terminal {
      background:#0a0a0a;
      color:#33ff33;
      font-size:14px;
      padding:20px 18px 12px 18px;
      border-radius:8px;
      max-height:3.5rem;
      height:3.5rem;
      transition:max-height 0.6s cubic-bezier(.4,1.6,.4,1),height 0.6s cubic-bezier(.4,1.6,.4,1);
      overflow-y:auto;
      box-sizing:border-box;
      scrollbar-color:#00c3ff #111;
      display:flex;
      flex-direction:column;
      resize:vertical;
    }
    #terminal.collapsed { overflow:hidden; resize:none; }
    #terminal-content>div{white-space:pre-wrap;margin-bottom:4px;}
    #terminal input{
      font-family:inherit;
      font-size:14px;
      padding:0;margin:0;background:transparent;border:none;color:#e0f7ff;outline:none;width:calc(100% - 2em);caret-color:transparent;position:relative;z-index:2;
    }
    #terminal-input::after{
      content:'▉';
      display:inline-block;
      animation:blink-caret 1.1s steps(1) infinite;
      color:#00ffff;font-weight:bold;margin-left:1px;text-shadow:0 0 6px #00ffff,0 0 10px #00eaff;
    }
    .terminal-input-row{display:flex;align-items:center;gap:0;margin:0;padding:0;}
    .terminal-input-row span{color:#00ffff;font-weight:bold;font-size:15px;margin-right:4px;letter-spacing:0.5px;text-shadow:0 0 6px #00eaff,0 0 10px #00ffff;}
    @keyframes blink-caret{0%,60%{opacity:1;}61%,100%{opacity:0;}}
    #matrixRain{opacity:0.12;pointer-events:none;position:fixed;z-index:-1;top:0;left:0;width:100%;height:100%;transition:opacity 0.5s ease-in-out;}
    #terminal.joker-active{animation:jokerGlow 1.5s infinite;}
    @keyframes jokerGlow{0%,100%{box-shadow:0 0 4px #00ffff;}50%{box-shadow:0 0 15px #ff00ff;}}
    .terminal-suggestion{color:#00ffff;margin-top:2px;font-size:13px;opacity:0.85;padding-left:12px;display:none;text-shadow:0 0 6px #00eaff,0 0 10px #00ffff;}
    .flash-success{animation:flashSuccess 1s ease;}
    @keyframes flashSuccess{0%{opacity:0;}40%{opacity:1;}100%{opacity:0.85;}}
  </style>
</head>
<body>
  <div id="loader" style="text-align:center;padding-top:40px;color:#00c3ff;font-family:monospace;font-size:16px;line-height:1.5;">
    <pre>
:'######::'##::::::::'#######::'##::::'##:'########:::::'########::'########:'##::::'##:
'##... ##: ##:::::::'##.... ##: ##:::: ##: ##.... ##:::: ##.... ##: ##.....:: ##:::: ##:
 ##:::..:: ##::::::: ##:::: ##: ##:::: ##: ##:::: ##:::: ##:::: ##: ##::::::: ##:::: ##:
 ##::::::: ##::::::: ##:::: ##: ##:::: ##: ##:::: ##:::: ##:::: ##: ######::: ##:::: ##:
 ##::::::: ##::::::: ##:::: ##: ##:::: ##: ##:::: ##:::: ##:::: ##: ##...::::. ##:: ##::
 ##::: ##: ##::::::: ##:::: ##: ##:::: ##: ##:::: ##:::: ##:::: ##: ##::::::::. ## ##:::
. ######:: ########:. #######::. #######:: ########::::: ########:: ########:::. ###::::
:......:::........:::.......::::.......:::........::::::........:::........:::::...:::::
    </pre>
    <p style="margin-top:10px;font-size:12px;color:#79e0ff;">The Cloud Terminal · Joe Leto<br>Real Cloud · Proof of Work</p>
  </div>

  <section id="terminal-section" style="margin:4rem auto;max-width:960px;">
    <div id="terminal" class="collapsed">
      <div id="terminal-content"></div>
      <div id="terminal-suggestion" class="terminal-suggestion"></div>
      <div class="terminal-input-row">
        <span id="terminal-prompt">joe@josephaleto.io:~$</span><input id="terminal-input" type="text" autocomplete="off" autofocus />
      </div>
    </div>
  </section>

  <canvas id="matrixRain"></canvas>

<script>
const API_URL = 'https://4wmuu5rp71.execute-api.us-east-1.amazonaws.com/';
const terminalContent = document.getElementById('terminal-content');
const terminalInput = document.getElementById('terminal-input');
const terminalWrapper = document.getElementById('terminal');
const terminalSuggestion = document.getElementById('terminal-suggestion');

function scrollToBottom(){terminalWrapper.scrollTo({top:terminalWrapper.scrollHeight,behavior:'smooth'});}

const startupMsg = document.createElement('div');
startupMsg.style.whiteSpace='pre-line';
startupMsg.style.color='#b2eaff';
startupMsg.innerHTML='joe@josephaleto.io — Cloud Resume Terminal\nCurated projects. Real infrastructure. Type "help" to begin.';
terminalContent.appendChild(startupMsg);
scrollToBottom();

const commandList=[
  'help','aws s3 ls','view counter','terraform apply','motd','whoami','bio','resume','linkedin','github','email','projects','projects cloud-terminal','projects cloud-resume','projects terraform','stack','architecture','quote','offer','clear','exit','source code','joker mode','professional mode','view classic'
];
const openCommands={
  'resume':'https://josephaletoresume.s3.amazonaws.com/joseph-leto-soultions-architect.pdf',
  'linkedin':'https://www.linkedin.com/in/joseph-leto/',
  'github':'https://github.com/serversorcerer',
  'email':'mailto:joe@josephaleto.io',
  'source code':'https://github.com/serversorcerer/cloud-resume-challenge',
  'view classic':'classic.html'
};

async function executeCommand(cmd){
  try{
    const res=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({command:cmd})});
    return await res.text();
  }catch(err){console.error(err);return 'Error processing command';}
}

let commandHistory=[];let historyIndex=-1;let offerState=null;let offerName='';

terminalInput.addEventListener('keydown',function(e){
  if(!terminalWrapper.classList.contains('expanded')){terminalWrapper.classList.remove('collapsed');terminalWrapper.classList.add('expanded');terminalWrapper.style.maxHeight='60vh';terminalWrapper.style.height='60vh';setTimeout(scrollToBottom,200);}},{once:true});

terminalInput.addEventListener('input',function(){
  const val=terminalInput.value.trim().toLowerCase();
  if(!val){terminalSuggestion.style.display='none';return;}
  let matches=commandList.filter(c=>c.startsWith(val));
  if(!matches.length)matches=commandList.filter(c=>c.includes(val));
  if(matches.length&&matches[0].toLowerCase()!==val){terminalSuggestion.style.display='block';terminalSuggestion.textContent=matches[0];}else{terminalSuggestion.style.display='none';}
});

terminalInput.addEventListener('keydown',function(e){
  if(e.key==='Tab'){e.preventDefault();const val=terminalInput.value.trim().toLowerCase();let m=commandList.filter(c=>c.startsWith(val));if(!m.length)m=commandList.filter(c=>c.includes(val));if(m.length){terminalInput.value=m[0];terminalSuggestion.style.display='none';}}
});
terminalInput.addEventListener('keydown',function(e){
  if(e.key==='ArrowUp'||e.key==='ArrowDown'){if(!commandHistory.length)return;if(e.key==='ArrowUp'){historyIndex=(historyIndex<=0)?commandHistory.length-1:historyIndex-1;}else{historyIndex=(historyIndex>=commandHistory.length-1)?0:historyIndex+1;}terminalInput.value=commandHistory[historyIndex];const val=terminalInput.value.trim().toLowerCase();let matches=commandList.filter(c=>c.startsWith(val));if(!matches.length)matches=commandList.filter(c=>c.includes(val));if(matches.length&&matches[0].toLowerCase()!==val){terminalSuggestion.style.display='block';terminalSuggestion.textContent=matches[0];}else{terminalSuggestion.style.display='none';}e.preventDefault();}}
);

terminalInput.addEventListener('keydown',async function(e){
 if(e.key!=="Enter")return;
 const input=terminalInput.value.trim(); if(!input) return;
 commandHistory.push(input); historyIndex=commandHistory.length;
 const output=document.createElement('div');
 output.innerHTML=`<span style="color:#00ffff;">$</span> <span style="color:#e0f7ff;">${input}</span>`;
 terminalContent.appendChild(output); terminalSuggestion.style.display='none';
 const cmdLower=input.toLowerCase();
 if(offerState){
   if(cmdLower==='clear'||cmdLower==='exit'){offerState=null;offerName='';const resp=await executeCommand(cmdLower);if(resp==='__CLEAR__'){terminalContent.innerHTML='';}else{const r=document.createElement('div');r.innerHTML=`<span style="color:#33ff33;">${resp}</span>`;terminalContent.appendChild(r);}terminalInput.value='';scrollToBottom();return;}
   if(offerState==='name'){offerName=input;offerState='email';const prompt=document.createElement('div');prompt.textContent='Enter your email:';prompt.style.color='#33ff33';terminalContent.appendChild(prompt);terminalInput.value='';scrollToBottom();return;}
   if(offerState==='email'){const email=input;const valid=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);if(!valid){const err=document.createElement('div');err.textContent='Invalid email. Try again:';err.style.color='#ff6666';terminalContent.appendChild(err);terminalInput.value='';scrollToBottom();return;}offerState=null;try{const res=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({command:'offer',name:offerName,email})});const text=await res.text();const msg=document.createElement('div');msg.textContent=res.ok?'✅ Offer sent!':text;msg.style.color='#33ff33';msg.classList.add('flash-success');terminalContent.appendChild(msg);}catch(err){const errDiv=document.createElement('div');errDiv.textContent='Error sending offer';errDiv.style.color='#ff6666';terminalContent.appendChild(errDiv);}terminalInput.value='';scrollToBottom();return;}
 }
 if(cmdLower==='offer'){offerState='name';offerName='';const prompt=document.createElement('div');prompt.textContent='Enter your name:';prompt.style.color='#33ff33';terminalContent.appendChild(prompt);terminalInput.value='';scrollToBottom();return;}
 if(openCommands[cmdLower]){window.open(openCommands[cmdLower],'_blank');const r=document.createElement('div');r.textContent=`Opening ${cmdLower}...`;r.style.color='#33ff33';terminalContent.appendChild(r);terminalInput.value='';scrollToBottom();return;}
 if(cmdLower==='view counter'){try{const res=await fetch('https://p2g657yagqa4o4llp63id3dmgq0xzcun.lambda-url.us-east-1.on.aws/');const data=await res.json();const r=document.createElement('div');r.textContent=`Total views: ${data.views}`;r.style.color='#33ff33';terminalContent.appendChild(r);}catch(err){const r=document.createElement('div');r.textContent='Error fetching counter';r.style.color='#ff6666';terminalContent.appendChild(r);}terminalInput.value='';scrollToBottom();return;}
 if(cmdLower==='joker mode'){activateJokerMode();terminalInput.value='';return;}
 if(cmdLower==='professional mode'){activateProfessionalMode();terminalInput.value='';return;}
 const resp=await executeCommand(input);
 if(resp==='__CLEAR__'){terminalContent.innerHTML='';}else{const response=document.createElement('div');response.innerHTML=resp.includes('<img')?resp:`<span style="color:#33ff33;">${resp}</span>`;terminalContent.appendChild(response);}terminalInput.value='';scrollToBottom();
});

terminalInput.addEventListener('focus',scrollToBottom);
terminalWrapper.addEventListener('click',e=>{if(e.target!==terminalInput)terminalInput.focus();});

const style=document.createElement('style');style.innerHTML=`#terminal::-webkit-scrollbar-thumb{background:linear-gradient(90deg,#00ffff 30%,#00bfff 100%);box-shadow:0 0 8px #00eaff,0 0 16px #00ffff;border-radius:6px;}#terminal::-webkit-scrollbar-track{background:#0a0a0a;}#terminal::-webkit-scrollbar{width:10px;}`;document.head.appendChild(style);
</script>
<script>
const canvas=document.getElementById('matrixRain');
const ctx=canvas.getContext('2d');
function resizeCanvas(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
resizeCanvas();window.addEventListener('resize',resizeCanvas);
const awsTerms=['Lambda','S3','API Gateway','DynamoDB','CloudFront','Route 53','GitHub Actions','Terraform'];
let fontSize=16;let columns=Math.floor(canvas.width/fontSize);let drops=Array(columns).fill(1);let terminalMode='professional';
function drawMatrixRain(){ctx.fillStyle='rgba(0,0,0,0.25)';ctx.fillRect(0,0,canvas.width,canvas.height);ctx.font=fontSize+'px monospace';const gradient=ctx.createLinearGradient(0,0,0,canvas.height);if(terminalMode==='joker'){gradient.addColorStop(0,'#00ffff');gradient.addColorStop(0.5,'#ff00ff');gradient.addColorStop(1,'#00ff66');}else{gradient.addColorStop(0,'#00c3ff');gradient.addColorStop(1,'#001b44');}ctx.fillStyle=gradient;for(let i=0;i<drops.length;i++){const text=awsTerms[Math.floor(Math.random()*awsTerms.length)];ctx.globalAlpha=terminalMode==='joker'?0.9+Math.random()*0.1:0.7+Math.random()*0.2;ctx.fillText(text,i*fontSize,drops[i]*fontSize);ctx.globalAlpha=1.0;if(drops[i]*fontSize>canvas.height&&Math.random()>0.985){drops[i]=0;}drops[i]+=0.8+Math.random()*0.5;}}
let frameDelay=window.matchMedia('(max-width:600px)').matches?150:80;let matrixInterval=setInterval(drawMatrixRain,frameDelay);
function startMatrixRain(){clearInterval(matrixInterval);matrixInterval=setInterval(drawMatrixRain,frameDelay);}
function activateJokerMode(){terminalMode='joker';fontSize=20;canvas.style.opacity='0.3';frameDelay=40;columns=Math.floor(canvas.width/fontSize);drops=Array(columns).fill(1);startMatrixRain();terminalWrapper.classList.add('joker-active');const msg=document.createElement('div');msg.textContent='Wake up, Neo...';msg.style.color='#ff66ff';terminalContent.appendChild(msg);scrollToBottom();}
function activateProfessionalMode(){terminalMode='professional';fontSize=16;canvas.style.opacity='0.12';frameDelay=window.matchMedia('(max-width:600px)').matches?150:80;columns=Math.floor(canvas.width/fontSize);drops=Array(columns).fill(1);startMatrixRain();terminalWrapper.classList.remove('joker-active');const msg=document.createElement('div');msg.textContent='Professional mode activated';msg.style.color='#33ff33';terminalContent.appendChild(msg);scrollToBottom();}
window.addEventListener('resize',()=>{columns=Math.floor(canvas.width/fontSize);drops=Array(columns).fill(1);});
</script>
</body>
</html>
