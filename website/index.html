<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Joe Leto | Cloud Engineer</title>
  <link rel="stylesheet" href="css/professional.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <nav>
      <a href="https://josephaletoresume.s3.amazonaws.com/joseph-leto-soultions-architect.pdf" target="_blank">Resume</a>
      <a href="https://github.com/serversorcerer" target="_blank">GitHub</a>
      <a href="https://www.linkedin.com/in/joseph-leto/" target="_blank">LinkedIn</a>
      <a href="mailto:joe@josephaleto.io">Email</a>
      <a href="#blog">Blog</a>
    </nav>
  </header>
  <main>
    <section class="hero" id="home">
      <img src="images/profile.png" alt="Joe Leto">
      <h1>Joe Leto</h1>
      <h2>Cloud Engineer focused on AWS automation</h2>
      <p class="subtitle">From high-stakes poker to highly-available systems</p>
      <a class="cta" href="mailto:joe@josephaleto.io">Get in touch</a>
    </section>

    <section id="about" class="about">
      <h2>About</h2>
      <p>I cut my teeth in the high-pressure world of poker, where quick thinking and clear communication matter. That mindset now drives how I design cloud systems—concise, reliable and built to handle real stakes.</p>
      <p>Every project here is deployed the same way I'd build for production: infrastructure as code, automated pipelines and real AWS services.</p>
    </section>

    <section id="projects" class="projects">
      <h2>Technical Experience</h2>
      <article class="project">
        <h3>The Cloud Terminal</h3>
        <img src="images/architecture.png" alt="Architecture diagram">
        <p>A live terminal embedded in this site. Commands hit AWS Lambda through API Gateway, data lives in DynamoDB and everything is deployed with Terraform and GitHub Actions.</p>
      </article>
      <article class="project">
        <h3>ShowdownStats</h3>
        <p>Analytics for poker hand histories.</p>
      </article>
      <ul class="other-projects">
        <li>Small Project One</li>
        <li>Small Project Two</li>
        <li>Small Project Three</li>
      </ul>
    </section>

    <section id="stack" class="stack">
      <h2>Stack &amp; Tools</h2>
      <div class="stack-groups">
        <div class="stack-group">
          <h3>Cloud</h3>
          <ul>
            <li>Lambda</li>
            <li>API Gateway</li>
            <li>DynamoDB</li>
            <li>S3</li>
          </ul>
        </div>
        <div class="stack-group">
          <h3>Programming</h3>
          <ul>
            <li>Python</li>
            <li>Go</li>
            <li>JavaScript</li>
          </ul>
        </div>
        <div class="stack-group">
          <h3>DevOps</h3>
          <ul>
            <li>Terraform</li>
            <li>GitHub Actions</li>
            <li>Docker</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="certs" class="certifications">
      <h2>Certifications</h2>
      <ul>
        <li>Certification 1</li>
        <li>Certification 2</li>
      </ul>
    </section>

    <section id="blog" class="blog">
      <h2>Blog</h2>
      <ul>
        <li><a href="https://medium.com/@joe_92405" target="_blank">Designing Serverless Terminals on AWS</a></li>
        <li><a href="https://medium.com/@joe_92405" target="_blank">Lessons from the Cloud Resume Challenge</a></li>
        <li><a href="https://medium.com/@joe_92405" target="_blank">Why Terraform for Everything</a></li>
      </ul>
    </section>

    <section id="terminal-section" class="terminal">
      <h2 class="sr-only">Terminal</h2>
      <div id="terminal">
        <div id="terminal-content"></div>
        <div id="terminal-suggestion" class="terminal-suggestion" style="display:none;"></div>
        <div class="terminal-input-row">
          <span id="terminal-prompt">joe@josephaleto.io:~$</span>
          <input id="terminal-input" type="text" autocomplete="off" />
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="counter"><span class="counter-number">...</span></div>
    <p>© 2025 Joe Leto</p>
    <div class="social">
      <a href="https://www.linkedin.com/in/joseph-leto/" target="_blank">LinkedIn</a>
      <a href="https://github.com/serversorcerer" target="_blank">GitHub</a>
      <a href="https://medium.com/@joe_92405" target="_blank">Medium</a>
    </div>
  </footer>

  <canvas id="matrixRain"></canvas>

<script>
  const counterEl = document.querySelector('.counter-number');
  fetch('https://josephaleto.io/api/count')
    .then(r => r.json())
    .then(d => { counterEl.textContent = 'Views: ' + d.views; })
    .catch(() => { counterEl.textContent = 'Views unavailable'; });
</script>

<script>
const terminalContent = document.getElementById('terminal-content');
const terminalInput = document.getElementById('terminal-input');
const terminalWrapper = document.getElementById('terminal');
const terminalPrompt = document.getElementById('terminal-prompt');
const terminalSuggestion = document.getElementById('terminal-suggestion');

function scrollToBottom() {
  terminalWrapper.scrollTop = terminalWrapper.scrollHeight;
}

const startupMsg = document.createElement('div');
startupMsg.style.whiteSpace = 'pre-line';
startupMsg.style.color = '#b2eaff';
startupMsg.innerHTML =
  'joe@josephaleto.io — Cloud Resume Terminal\nCurated projects. Real infrastructure. Type "help" to begin.';
terminalContent.appendChild(startupMsg);
scrollToBottom();

const API_URL = 'https://4wmuu5rp71.execute-api.us-east-1.amazonaws.com/';

const commandList = [
  'help',
  'aws s3 ls',
  'view counter',
  'terraform apply',
  'motd',
  'whoami',
  'bio',
  'resume',
  'linkedin',
  'github',
  'email',
  'projects',
  'projects cloud-terminal',
  'projects cloud-resume',
  'projects terraform',
  'stack',
  'architecture',
  'quote',
  'offer',
  'clear',
  'exit',
  'source code',
  'joker mode',
  'professional mode'
];

const openCommands = {
  'resume': 'https://josephaletoresume.s3.amazonaws.com/joseph-leto-soultions-architect.pdf',
  'linkedin': 'https://www.linkedin.com/in/joseph-leto/',
  'github': 'https://github.com/serversorcerer',
  'email': 'mailto:joe@josephaleto.io',
  'source code': 'https://github.com/serversorcerer/cloud-resume-challenge'
};

async function executeCommand(cmd) {
  try {
    const res = await fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ command: cmd })
    });
    return await res.text();
  } catch (err) {
    console.error(err);
    return 'Error processing command';
  }
}

let commandHistory = [];
let historyIndex = -1;
let offerState = null;
let offerName = '';
let offerEmail = '';
let offerCompany = '';
let offerMessage = '';

let terminalExpanded = false;
terminalInput.addEventListener('keydown', function(e) {
  if (!terminalExpanded) {
    terminalExpanded = true;
    terminalWrapper.style.height = '60vh';
    setTimeout(scrollToBottom, 200);
  }
}, { once: true });

terminalInput.addEventListener('input', function() {
  const val = terminalInput.value.trim().toLowerCase();
  if (!val) {
    terminalSuggestion.style.display = 'none';
    return;
  }
  let matches = commandList.filter(cmd => cmd.startsWith(val));
  if (!matches.length) matches = commandList.filter(cmd => cmd.includes(val));
  if (matches.length && matches[0].toLowerCase() !== val) {
    terminalSuggestion.style.display = 'block';
    terminalSuggestion.textContent = matches[0];
  } else {
    terminalSuggestion.style.display = 'none';
  }
});

terminalInput.addEventListener('keydown', function(e) {
  if (e.key === 'Tab') {
    e.preventDefault();
    const val = terminalInput.value.trim().toLowerCase();
    let matches = commandList.filter(cmd => cmd.startsWith(val));
    if (!matches.length) matches = commandList.filter(cmd => cmd.includes(val));
    if (matches.length) {
      terminalInput.value = matches[0];
      terminalSuggestion.style.display = 'none';
    }
  }
});

terminalInput.addEventListener('keydown', function(e) {
  if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
    if (commandHistory.length === 0) return;
    if (e.key === 'ArrowUp') {
      historyIndex = (historyIndex <= 0) ? commandHistory.length - 1 : historyIndex - 1;
    } else if (e.key === 'ArrowDown') {
      historyIndex = (historyIndex >= commandHistory.length - 1) ? 0 : historyIndex + 1;
    }
    terminalInput.value = commandHistory[historyIndex];
    const val = terminalInput.value.trim().toLowerCase();
    let matches = commandList.filter(cmd => cmd.startsWith(val));
    if (!matches.length) matches = commandList.filter(cmd => cmd.includes(val));
    if (matches.length && matches[0].toLowerCase() !== val) {
      terminalSuggestion.style.display = 'block';
      terminalSuggestion.textContent = matches[0];
    } else {
      terminalSuggestion.style.display = 'none';
    }
    e.preventDefault();
  }
});

terminalInput.addEventListener('keydown', async function(e) {
  if (e.key === "Enter") {
    const input = terminalInput.value.trim();
    if (!input) return;
    commandHistory.push(input);
    historyIndex = commandHistory.length;
    const output = document.createElement("div");
    output.innerHTML = `<span style="color:#00ffff;">$</span> <span style="color:#e0f7ff;">${input}</span>`;
    terminalContent.appendChild(output);
    terminalSuggestion.style.display = "none";

    const cmdLower = input.toLowerCase();

    if (offerState) {
      if (cmdLower === 'clear' || cmdLower === 'exit') {
        offerState = null;
        offerName = '';
        offerEmail = '';
        offerCompany = '';
        offerMessage = '';
        const resp = await executeCommand(cmdLower);
        if (resp === "__CLEAR__") {
          terminalContent.innerHTML = "";
        } else {
          const r = document.createElement('div');
          r.innerHTML = `<span style="color:#33ff33;">${resp}</span>`;
          terminalContent.appendChild(r);
        }
        terminalInput.value = '';
        scrollToBottom();
        return;
      }

      if (offerState === 'name') {
        offerName = input;
        offerState = 'email';
        const prompt = document.createElement('div');
        prompt.textContent = 'Enter your email:';
        prompt.style.color = '#33ff33';
        terminalContent.appendChild(prompt);
        terminalInput.value = '';
        scrollToBottom();
        return;
      } else if (offerState === 'email') {
        offerEmail = input;
        const valid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(offerEmail);
        if (!valid) {
          const err = document.createElement('div');
          err.textContent = 'Invalid email. Try again:';
          err.style.color = '#ff6666';
          terminalContent.appendChild(err);
          terminalInput.value = '';
          scrollToBottom();
          return;
        }
        offerState = 'company';
        const prompt = document.createElement('div');
        prompt.textContent = 'Enter your company (optional):';
        prompt.style.color = '#33ff33';
        terminalContent.appendChild(prompt);
        terminalInput.value = '';
        scrollToBottom();
        return;
      } else if (offerState === 'company') {
        offerCompany = input;
        offerState = 'message';
        const prompt = document.createElement('div');
        prompt.textContent = 'Enter your message (optional):';
        prompt.style.color = '#33ff33';
        terminalContent.appendChild(prompt);
        terminalInput.value = '';
        scrollToBottom();
        return;
      } else if (offerState === 'message') {
        offerMessage = input;
        offerState = null;
        const payload = {
          command: 'offer',
          name: offerName,
          email: offerEmail,
          company: offerCompany,
          message: offerMessage
        };
        try {
          const res = await fetch(API_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          const text = await res.text();
          const msg = document.createElement('div');
          msg.textContent = res.ok ? '✅ Offer sent!' : text;
          msg.style.color = '#33ff33';
          terminalContent.appendChild(msg);
        } catch (err) {
          const errDiv = document.createElement('div');
          errDiv.textContent = 'Error sending offer';
          errDiv.style.color = '#ff6666';
          terminalContent.appendChild(errDiv);
        }
        terminalInput.value = '';
        scrollToBottom();
        return;
      }
    }

    if (cmdLower === 'offer') {
      offerState = 'name';
      offerName = '';
      offerEmail = '';
      offerCompany = '';
      offerMessage = '';
      const prompt = document.createElement('div');
      prompt.textContent = 'Enter your name:';
      prompt.style.color = '#33ff33';
      terminalContent.appendChild(prompt);
      terminalInput.value = '';
      scrollToBottom();
      return;
    }
    if (openCommands[cmdLower]) {
      window.open(openCommands[cmdLower], '_blank');
      const response = document.createElement('div');
      response.textContent = `Opening ${cmdLower}...`;
      response.style.color = '#33ff33';
      terminalContent.appendChild(response);
      terminalInput.value = "";
      scrollToBottom();
      return;
    }

    if (cmdLower === 'view counter') {
      const count = document.querySelector('.counter-number')?.textContent.trim() || 'Unknown';
      const response = document.createElement('div');
      response.textContent = `Total views: ${count}`;
      response.style.color = '#33ff33';
      terminalContent.appendChild(response);
      terminalInput.value = "";
      scrollToBottom();
      return;
    }

    const resp = await executeCommand(input);
    if (resp === "__CLEAR__") {
      terminalContent.innerHTML = "";
    } else {
      const response = document.createElement("div");
      if (resp.includes('<img')) {
        response.innerHTML = resp;
      } else {
        response.innerHTML = `<span style="color:#33ff33;">${resp}</span>`;
      }
      terminalContent.appendChild(response);
    }
    terminalInput.value = "";
    scrollToBottom();
  }
});

terminalInput.addEventListener('focus', scrollToBottom);
terminalWrapper.addEventListener('click', function(e) {
  if (e.target !== terminalInput) terminalInput.focus();
});
terminalContent.style.fontFamily = 'Fira Mono, monospace';
terminalInput.style.fontFamily = 'Fira Mono, monospace';
</script>
</body>
</html>
