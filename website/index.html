<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Joe Leto | Cloud Engineer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/simple.css">
</head>
<body>
  <section class="hero">
    <img src="images/profile.png" alt="Joe Leto">
    <h1>Joe Leto | Cloud Engineer focused on AWS automation</h1>
    <p class="subtitle">From high-stakes poker to highly-available systems</p>
    <a class="cta-btn" href="mailto:joe@josephaleto.io">Contact Me</a>
    <div class="nav-links">
      <a href="https://josephaletoresume.s3.amazonaws.com/joseph-leto-soultions-architect.pdf" target="_blank">Resume</a>
      <a href="https://github.com/serversorcerer" target="_blank">GitHub</a>
      <a href="https://www.linkedin.com/in/joseph-leto/" target="_blank">LinkedIn</a>
      <a href="mailto:joe@josephaleto.io" target="_blank">Email</a>
      <a href="https://medium.com/@joe_92405" target="_blank">Blog</a>
    </div>
  </section>

  <section class="about" id="about">
    <h2>About Me</h2>
    <p>I’m a professional poker dealer turned Cloud Engineer. Years dealing cards taught me discipline and quick decision-making. Now I design AWS systems that stay up under pressure.</p>
    <p>My poker background keeps my risk calculations sharp and my infrastructure resilient.</p>
  </section>

  <section class="experience" id="experience">
    <h2>Technical Experience</h2>
    <img src="images/architecture.png" alt="Architecture diagram" style="width:100%;max-width:600px">
    <p>The Cloud Terminal is a serverless application using Lambda, API Gateway, DynamoDB and S3. Infrastructure is managed with Terraform and deployed via GitHub Actions.</p>
  </section>

  <section class="projects" id="projects">
    <h2>Additional Projects</h2>
    <div class="projects-grid">
      <div class="project-card">
        <h3>ShowdownStats</h3>
        <p>Poker analytics built with Python and DynamoDB.</p>
        <small>Python · DynamoDB · API Gateway</small><br>
        <a href="#">Learn More</a>
      </div>
      <div class="project-card"><h3>Cloud Resume Challenge</h3></div>
      <div class="project-card"><h3>Infrastructure as Code</h3></div>
      <div class="project-card"><h3>More Projects</h3></div>
    </div>
  </section>

  <section class="stack" id="stack">
    <h2>Stack & Tools</h2>
    <h3>Cloud</h3>
    <ul>
      <li>Lambda</li>
      <li>DynamoDB</li>
      <li>S3</li>
      <li>EventBridge</li>
    </ul>
    <h3>Programming</h3>
    <ul>
      <li>Python</li>
      <li>Go</li>
      <li>JavaScript</li>
    </ul>
    <h3>DevOps</h3>
    <ul>
      <li>GitHub Actions</li>
      <li>Docker</li>
      <li>Linux</li>
    </ul>
  </section>

  <section class="certifications" id="certifications">
    <h2>Certifications</h2>
    <p>Studying for AWS Solutions Architect — coming soon!</p>
  </section>

  <section class="blog" id="blog">
    <h2>Blog Posts</h2>
    <ul>
      <li><a href="https://medium.com/@joe_92405" target="_blank">How I Built the Cloud Terminal</a></li>
      <li><a href="https://medium.com/@joe_92405" target="_blank">Terraform Tips for Beginners</a></li>
    </ul>
  </section>

  <section id="terminal-section" class="terminal">
    <h2 class="sr-only">Interactive Terminal</h2>
    <div id="terminal">
      <div id="terminal-content"></div>
      <div id="terminal-suggestion" class="terminal-suggestion" style="display:none;"></div>
      <div class="terminal-input-row">
        <span id="terminal-prompt">joe@josephaleto.io:~$</span><input id="terminal-input" type="text" autocomplete="off" autofocus />
      </div>
    </div>
  </section>

  <footer>
    <div class="counter-number">Views: 0</div>
    <div>
      <a href="https://www.linkedin.com/in/joseph-leto/" target="_blank">LinkedIn</a> |
      <a href="https://github.com/serversorcerer" target="_blank">GitHub</a> |
      <a href="https://medium.com/@joe_92405" target="_blank">Medium</a>
    </div>
    <div>&copy; <span id="year"></span> Joe Leto</div>
  </footer>

<script>
const counterEl = document.querySelector('.counter-number');
async function updateCounter() {
  try {
    const res = await fetch('https://p2g657yagqa4o4llp63id3dmgq0xzcun.lambda-url.us-east-1.on.aws/');
    const data = await res.json();
    counterEl.textContent = `Views: ${data.views}`;
  } catch (e) {
    console.error(e);
  }
}
updateCounter();
document.getElementById('year').textContent = new Date().getFullYear();
</script>

<script>
const terminalContent = document.getElementById('terminal-content');
const terminalInput = document.getElementById('terminal-input');
const terminalWrapper = document.getElementById('terminal');
const terminalPrompt = document.getElementById('terminal-prompt');
const terminalSuggestion = document.getElementById('terminal-suggestion');

function scrollToBottom() {
  terminalWrapper.scrollTo({ top: terminalWrapper.scrollHeight, behavior: 'smooth' });
}

const startupMsg = document.createElement('div');
startupMsg.style.whiteSpace = 'pre-line';
startupMsg.style.color = '#b2eaff';
startupMsg.innerHTML = 'joe@josephaleto.io — Cloud Resume Terminal\nCurated projects. Real infrastructure. Type "help" to begin.';
terminalContent.appendChild(startupMsg);
scrollToBottom();

const API_URL = 'https://4wmuu5rp71.execute-api.us-east-1.amazonaws.com/';

const commandList = [
  'help',
  'aws s3 ls',
  'view counter',
  'terraform apply',
  'motd',
  'whoami',
  'bio',
  'resume',
  'linkedin',
  'github',
  'email',
  'projects',
  'projects cloud-terminal',
  'projects cloud-resume',
  'projects terraform',
  'stack',
  'architecture',
  'quote',
  'offer',
  'clear',
  'exit',
  'source code'
];

const openCommands = {
  'resume': 'https://josephaletoresume.s3.amazonaws.com/joseph-leto-soultions-architect.pdf',
  'linkedin': 'https://www.linkedin.com/in/joseph-leto/',
  'github': 'https://github.com/serversorcerer',
  'email': 'mailto:joe@josephaleto.io',
  'source code': 'https://github.com/serversorcerer/cloud-resume-challenge'
};

async function executeCommand(cmd) {
  try {
    const res = await fetch(API_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ command: cmd })
    });
    return await res.text();
  } catch (err) {
    console.error(err);
    return 'Error processing command';
  }
}

let commandHistory = [];
let historyIndex = -1;
let offerState = null;
let offerName = '';
let offerEmail = '';
let offerCompany = '';
let offerMessage = '';

let terminalExpanded = false;
terminalInput.addEventListener('keydown', function(e) {
  if (!terminalExpanded) {
    terminalExpanded = true;
    terminalWrapper.style.maxHeight = '60vh';
    terminalWrapper.style.height = '60vh';
    setTimeout(scrollToBottom, 200);
  }
}, { once: true });

terminalInput.addEventListener('input', function() {
  const val = terminalInput.value.trim().toLowerCase();
  if (!val) { terminalSuggestion.style.display = 'none'; return; }
  let matches = commandList.filter(cmd => cmd.startsWith(val));
  if (!matches.length) matches = commandList.filter(cmd => cmd.includes(val));
  if (matches.length && matches[0].toLowerCase() !== val) {
    terminalSuggestion.style.display = 'block';
    terminalSuggestion.textContent = matches[0];
  } else {
    terminalSuggestion.style.display = 'none';
  }
});

terminalInput.addEventListener('keydown', function(e) {
  if (e.key === 'Tab') {
    e.preventDefault();
    const val = terminalInput.value.trim().toLowerCase();
    let matches = commandList.filter(cmd => cmd.startsWith(val));
    if (!matches.length) matches = commandList.filter(cmd => cmd.includes(val));
    if (matches.length) {
      terminalInput.value = matches[0];
      terminalSuggestion.style.display = 'none';
    }
  }
});

terminalInput.addEventListener('keydown', function(e) {
  if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
    if (commandHistory.length === 0) return;
    if (e.key === 'ArrowUp') {
      historyIndex = (historyIndex <= 0) ? commandHistory.length - 1 : historyIndex - 1;
    } else if (e.key === 'ArrowDown') {
      historyIndex = (historyIndex >= commandHistory.length - 1) ? 0 : historyIndex + 1;
    }
    terminalInput.value = commandHistory[historyIndex];
    const val = terminalInput.value.trim().toLowerCase();
    let matches = commandList.filter(cmd => cmd.startsWith(val));
    if (!matches.length) matches = commandList.filter(cmd => cmd.includes(val));
    if (matches.length && matches[0].toLowerCase() !== val) {
      terminalSuggestion.style.display = 'block';
      terminalSuggestion.textContent = matches[0];
    } else {
      terminalSuggestion.style.display = 'none';
    }
    e.preventDefault();
  }
});

terminalInput.addEventListener('keydown', async function(e) {
  if (e.key === 'Enter') {
    const input = terminalInput.value.trim();
    if (!input) return;
    commandHistory.push(input);
    historyIndex = commandHistory.length;
    const output = document.createElement('div');
    output.innerHTML = `<span style="color:#00ffff;">$</span> <span style="color:#e0f7ff;">${input}</span>`;
    terminalContent.appendChild(output);
    terminalSuggestion.style.display = 'none';
    const cmdLower = input.toLowerCase();

    if (offerState) {
      if (cmdLower === 'clear' || cmdLower === 'exit') {
        offerState = null;
        offerName = '';
        offerEmail = '';
        offerCompany = '';
        offerMessage = '';
        const resp = await executeCommand(cmdLower);
        if (resp === '__CLEAR__') { terminalContent.innerHTML = ''; } else {
          const r = document.createElement('div');
          r.innerHTML = `<span style="color:#33ff33;">${resp}</span>`;
          terminalContent.appendChild(r);
        }
        terminalInput.value = '';
        scrollToBottom();
        return;
      }
      if (offerState === 'name') {
        offerName = input;
        offerState = 'email';
        const prompt = document.createElement('div');
        prompt.textContent = 'Enter your email:';
        prompt.style.color = '#33ff33';
        terminalContent.appendChild(prompt);
        terminalInput.value = '';
        scrollToBottom();
        return;
      } else if (offerState === 'email') {
        offerEmail = input;
        const valid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(offerEmail);
        if (!valid) {
          const err = document.createElement('div');
          err.textContent = 'Invalid email. Try again:';
          err.style.color = '#ff6666';
          terminalContent.appendChild(err);
          terminalInput.value = '';
          scrollToBottom();
          return;
        }
        offerState = 'company';
        const prompt = document.createElement('div');
        prompt.textContent = 'Enter your company (optional):';
        prompt.style.color = '#33ff33';
        terminalContent.appendChild(prompt);
        terminalInput.value = '';
        scrollToBottom();
        return;
      } else if (offerState === 'company') {
        offerCompany = input;
        offerState = 'message';
        const prompt = document.createElement('div');
        prompt.textContent = 'Enter your message (optional):';
        prompt.style.color = '#33ff33';
        terminalContent.appendChild(prompt);
        terminalInput.value = '';
        scrollToBottom();
        return;
      } else if (offerState === 'message') {
        offerMessage = input;
        offerState = null;
        const payload = { command: 'offer', name: offerName, email: offerEmail, company: offerCompany, message: offerMessage };
        try {
          const res = await fetch(API_URL, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
          const text = await res.text();
          const msg = document.createElement('div');
          msg.textContent = res.ok ? '✅ Offer sent!' : text;
          msg.style.color = '#33ff33';
          terminalContent.appendChild(msg);
        } catch (err) {
          const errDiv = document.createElement('div');
          errDiv.textContent = 'Error sending offer';
          errDiv.style.color = '#ff6666';
          terminalContent.appendChild(errDiv);
        }
        terminalInput.value = '';
        scrollToBottom();
        return;
      }
    }

    if (cmdLower === 'offer') {
      offerState = 'name';
      offerName = '';
      offerEmail = '';
      offerCompany = '';
      offerMessage = '';
      const prompt = document.createElement('div');
      prompt.textContent = 'Enter your name:';
      prompt.style.color = '#33ff33';
      terminalContent.appendChild(prompt);
      terminalInput.value = '';
      scrollToBottom();
      return;
    }

    if (openCommands[cmdLower]) {
      window.open(openCommands[cmdLower], '_blank');
      const response = document.createElement('div');
      response.textContent = `Opening ${cmdLower}...`;
      response.style.color = '#33ff33';
      terminalContent.appendChild(response);
      terminalInput.value = '';
      scrollToBottom();
      return;
    }

    if (cmdLower === 'view counter') {
      const count = document.querySelector('.counter-number')?.textContent.trim() || 'Unknown';
      const response = document.createElement('div');
      response.textContent = `Total views: ${count.replace('Views: ','')}`;
      response.style.color = '#33ff33';
      terminalContent.appendChild(response);
      terminalInput.value = '';
      scrollToBottom();
      return;
    }

    const resp = await executeCommand(input);
    if (resp === '__CLEAR__') {
      terminalContent.innerHTML = '';
    } else {
      const response = document.createElement('div');
      if (resp.includes('<img')) {
        response.innerHTML = resp;
      } else {
        response.innerHTML = `<span style="color:#33ff33;">${resp}</span>`;
      }
      setTimeout(() => {
        [...response.querySelectorAll('a')].forEach(a => { a.target = '_blank'; });
      }, 0);
      terminalContent.appendChild(response);
    }
    terminalInput.value = '';
    scrollToBottom();
  }
});

terminalInput.addEventListener('focus', scrollToBottom);
terminalWrapper.addEventListener('click', function(e) { if (e.target !== terminalInput) terminalInput.focus(); });
terminalContent.style.fontFamily = 'monospace';
terminalInput.style.fontFamily = 'monospace';
</script>
</body>
</html>
